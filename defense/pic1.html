<!DOCTYPE html>

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¸ê³„ ëª…í™” ê°¤ëŸ¬ë¦¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        color: #fff;
        min-height: 100vh;
    }

    .header {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header h1 {
        font-size: 2.5em;
        background: linear-gradient(45deg, #f093fb, #f5576c);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 10px;
    }

    .header p {
        color: #aaa;
        font-size: 1.1em;
    }

    .museum-tabs {
        display: flex;
        justify-content: center;
        gap: 10px;
        padding: 20px;
        flex-wrap: wrap;
        background: rgba(0, 0, 0, 0.2);
    }

    .museum-tab {
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s ease;
    }

    .museum-tab:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .museum-tab.active {
        background: linear-gradient(45deg, #667eea, #764ba2);
        border-color: transparent;
    }

    .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        padding: 20px;
        flex-wrap: wrap;
    }

    .category-btn {
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s ease;
    }

    .category-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .category-btn.active {
        background: linear-gradient(45deg, #f093fb, #f5576c);
        border-color: transparent;
    }

    .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
        padding: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .art-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .art-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        border-color: rgba(255, 255, 255, 0.3);
    }

    .art-image {
        width: 100%;
        height: 300px;
        object-fit: cover;
        background: #222;
    }

    .art-info {
        padding: 20px;
    }

    .art-title {
        font-size: 1.2em;
        margin-bottom: 8px;
        color: #fff;
    }

    .art-artist {
        color: #f093fb;
        font-size: 1em;
        margin-bottom: 5px;
    }

    .art-date {
        color: #aaa;
        font-size: 0.9em;
    }

    .museum-badge {
        display: inline-block;
        padding: 4px 10px;
        background: rgba(102, 126, 234, 0.3);
        border-radius: 12px;
        font-size: 0.85em;
        margin-top: 8px;
        color: #a8b9ff;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 1000;
        overflow: auto;
        padding: 20px;
    }

    .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        max-width: 1200px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .modal-image {
        width: 100%;
        max-height: 70vh;
        object-fit: contain;
        background: #000;
    }

    .modal-info {
        padding: 30px;
    }

    .modal-title {
        font-size: 2em;
        margin-bottom: 15px;
    }

    .modal-artist {
        font-size: 1.5em;
        color: #f093fb;
        margin-bottom: 10px;
    }

    .modal-details {
        color: #ccc;
        line-height: 1.8;
        font-size: 1.1em;
    }

    .close-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50%;
        color: white;
        font-size: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
    }

    .close-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
    }

    .loading {
        text-align: center;
        padding: 50px;
        font-size: 1.5em;
        color: #f093fb;
    }

    .spinner {
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-top: 4px solid #f093fb;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
```

</head>
<body>
    <div class="header">
        <h1>ğŸ¨ ì„¸ê³„ ëª…í™” ê°¤ëŸ¬ë¦¬</h1>
        <p>ì„¸ê³„ ìœ ëª… ë¯¸ìˆ ê´€ ì†Œì¥ ì‘í’ˆ ê°ìƒ</p>
    </div>

```
<div class="museum-tabs">
    <button class="museum-tab active" data-museum="met">ë©”íŠ¸ë¡œí´ë¦¬íƒ„ ë¯¸ìˆ ê´€</button>
    <button class="museum-tab" data-museum="rijks">ì•”ìŠ¤í…Œë¥´ë‹´ êµ­ë¦½ë¯¸ìˆ ê´€</button>
    <button class="museum-tab" data-museum="chicago">ì‹œì¹´ê³  ë¯¸ìˆ ê´€</button>
    <button class="museum-tab" data-museum="harvard">í•˜ë²„ë“œ ë¯¸ìˆ ê´€</button>
</div>

<div class="controls" id="controls"></div>

<div id="gallery" class="gallery"></div>

<div id="modal" class="modal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal()">&times;</button>
        <img id="modalImage" class="modal-image" src="" alt="">
        <div class="modal-info">
            <h2 id="modalTitle" class="modal-title"></h2>
            <p id="modalArtist" class="modal-artist"></p>
            <div id="modalDetails" class="modal-details"></div>
        </div>
    </div>
</div>

<script>
    const gallery = document.getElementById('gallery');
    const modal = document.getElementById('modal');
    const controlsDiv = document.getElementById('controls');
    let currentArtworks = [];
    let currentMuseum = 'met';

    const museumConfigs = {
        met: {
            name: 'ë©”íŠ¸ë¡œí´ë¦¬íƒ„',
            categories: [
                { label: 'ì „ì²´ ëª…í™”', query: 'paintings' },
                { label: 'ë°˜ ê³ í', query: 'Vincent van Gogh' },
                { label: 'ëª¨ë„¤', query: 'Claude Monet' },
                { label: 'í”¼ì¹´ì†Œ', query: 'Pablo Picasso' },
                { label: 'ë ˜ë¸Œë€íŠ¸', query: 'Rembrandt' },
                { label: 'ë‹¤ë¹ˆì¹˜', query: 'Leonardo da Vinci' }
            ]
        },
        rijks: {
            name: 'ì•”ìŠ¤í…Œë¥´ë‹´ êµ­ë¦½',
            categories: [
                { label: 'ì „ì²´ ì‘í’ˆ', query: 'painting' },
                { label: 'ë ˜ë¸Œë€íŠ¸', query: 'Rembrandt' },
                { label: 'ë² ë¥´ë©”ë¥´', query: 'Vermeer' },
                { label: 'ë°˜ ê³ í', query: 'Van Gogh' },
                { label: 'í™©ê¸ˆì‹œëŒ€', query: 'Golden Age' }
            ]
        },
        chicago: {
            name: 'ì‹œì¹´ê³ ',
            categories: [
                { label: 'ì „ì²´ ì‘í’ˆ', query: 'painting' },
                { label: 'ëª¨ë„¤', query: 'Monet' },
                { label: 'ë¥´ëˆ„ì•„ë¥´', query: 'Renoir' },
                { label: 'ì¸ìƒíŒŒ', query: 'Impressionism' },
                { label: 'í˜„ëŒ€ë¯¸ìˆ ', query: 'Modern' }
            ]
        },
        harvard: {
            name: 'í•˜ë²„ë“œ',
            categories: [
                { label: 'ì „ì²´ ì‘í’ˆ', query: 'painting' },
                { label: 'ìœ ëŸ½ íšŒí™”', query: 'European painting' },
                { label: 'ì•„ì‹œì•„ ì˜ˆìˆ ', query: 'Asian art' },
                { label: 'í˜„ëŒ€ë¯¸ìˆ ', query: 'Contemporary' }
            ]
        }
    };

    // ë¯¸ìˆ ê´€ íƒ­ ì´ë²¤íŠ¸
    document.querySelectorAll('.museum-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.museum-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            currentMuseum = tab.dataset.museum;
            loadCategories();
        });
    });

    function loadCategories() {
        const config = museumConfigs[currentMuseum];
        controlsDiv.innerHTML = config.categories.map(cat => 
            `<button class="category-btn" data-query="${cat.query}">${cat.label}</button>`
        ).join('');

        // ì²« ë²ˆì§¸ ë²„íŠ¼ í™œì„±í™”
        const firstBtn = controlsDiv.querySelector('.category-btn');
        if (firstBtn) {
            firstBtn.classList.add('active');
            loadArtworks(firstBtn.dataset.query);
        }

        // ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ì´ë²¤íŠ¸
        controlsDiv.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                controlsDiv.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                loadArtworks(btn.dataset.query);
            });
        });
    }

    async function loadArtworks(query) {
        gallery.innerHTML = '<div class="loading"><div class="spinner"></div>ëª…í™”ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
        
        try {
            if (currentMuseum === 'met') {
                await loadMetArtworks(query);
            } else if (currentMuseum === 'rijks') {
                await loadRijksArtworks(query);
            } else if (currentMuseum === 'chicago') {
                await loadChicagoArtworks(query);
            } else if (currentMuseum === 'harvard') {
                await loadHarvardArtworks(query);
            }
        } catch (error) {
            console.error('Error:', error);
            gallery.innerHTML = '<div class="loading">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
        }
    }

    async function loadMetArtworks(query) {
        const searchUrl = `https://collectionapi.metmuseum.org/public/collection/v1/search?hasImages=true&q=${encodeURIComponent(query)}`;
        const searchRes = await fetch(searchUrl);
        const searchData = await searchRes.json();
        
        if (!searchData.objectIDs || searchData.objectIDs.length === 0) {
            gallery.innerHTML = '<div class="loading">ì‘í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        const selectedIds = searchData.objectIDs.sort(() => Math.random() - 0.5).slice(0, 20);
        const artworks = [];

        for (const id of selectedIds) {
            try {
                const res = await fetch(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`);
                const art = await res.json();
                if (art.primaryImage) {
                    artworks.push({
                        image: art.primaryImageSmall || art.primaryImage,
                        fullImage: art.primaryImage,
                        title: art.title || 'ì œëª© ì—†ìŒ',
                        artist: art.artistDisplayName || 'ì‘ê°€ ë¯¸ìƒ',
                        date: art.objectDate || '',
                        museum: 'ë©”íŠ¸ë¡œí´ë¦¬íƒ„',
                        details: {
                            medium: art.medium,
                            dimensions: art.dimensions,
                            department: art.department,
                            culture: art.culture
                        }
                    });
                }
            } catch (e) {
                console.error('ì‘í’ˆ ë¡œë”© ì‹¤íŒ¨:', e);
            }
        }

        currentArtworks = artworks;
        displayArtworks(artworks);
    }

    async function loadRijksArtworks(query) {
        const apiKey = 'fXHPLv0v';
        const url = `https://www.rijksmuseum.nl/api/en/collection?key=${apiKey}&q=${encodeURIComponent(query)}&imgonly=true&ps=20`;
        const res = await fetch(url);
        const data = await res.json();

        if (!data.artObjects || data.artObjects.length === 0) {
            gallery.innerHTML = '<div class="loading">ì‘í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        const artworks = data.artObjects.map(art => ({
            image: art.webImage?.url || '',
            fullImage: art.webImage?.url || '',
            title: art.title || art.longTitle || 'ì œëª© ì—†ìŒ',
            artist: art.principalOrFirstMaker || 'ì‘ê°€ ë¯¸ìƒ',
            date: '',
            museum: 'ì•”ìŠ¤í…Œë¥´ë‹´ êµ­ë¦½',
            details: {
                objectNumber: art.objectNumber
            }
        })).filter(art => art.image);

        currentArtworks = artworks;
        displayArtworks(artworks);
    }

    async function loadChicagoArtworks(query) {
        const url = `https://api.artic.edu/api/v1/artworks/search?q=${encodeURIComponent(query)}&query[term][is_public_domain]=true&fields=id,title,artist_display,date_display,image_id&limit=20`;
        const res = await fetch(url);
        const data = await res.json();

        if (!data.data || data.data.length === 0) {
            gallery.innerHTML = '<div class="loading">ì‘í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        const artworks = data.data.map(art => {
            if (!art.image_id) return null;
            return {
                image: `https://www.artic.edu/iiif/2/${art.image_id}/full/843,/0/default.jpg`,
                fullImage: `https://www.artic.edu/iiif/2/${art.image_id}/full/full/0/default.jpg`,
                title: art.title || 'ì œëª© ì—†ìŒ',
                artist: art.artist_display || 'ì‘ê°€ ë¯¸ìƒ',
                date: art.date_display || '',
                museum: 'ì‹œì¹´ê³ ',
                details: {}
            };
        }).filter(art => art);

        currentArtworks = artworks;
        displayArtworks(artworks);
    }

    async function loadHarvardArtworks(query) {
        const apiKey = 'be638540-86ce-4a62-b6d9-1850558bd89f';
        const url = `https://api.harvardartmuseums.org/object?apikey=${apiKey}&q=${encodeURIComponent(query)}&hasimage=1&size=20`;
        const res = await fetch(url);
        const data = await res.json();

        if (!data.records || data.records.length === 0) {
            gallery.innerHTML = '<div class="loading">ì‘í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        const artworks = data.records.map(art => ({
            image: art.primaryimageurl || '',
            fullImage: art.primaryimageurl || '',
            title: art.title || 'ì œëª© ì—†ìŒ',
            artist: art.people?.[0]?.name || 'ì‘ê°€ ë¯¸ìƒ',
            date: art.dated || '',
            museum: 'í•˜ë²„ë“œ',
            details: {
                culture: art.culture,
                medium: art.medium,
                division: art.division
            }
        })).filter(art => art.image);

        currentArtworks = artworks;
        displayArtworks(artworks);
    }

    function displayArtworks(artworks) {
        gallery.innerHTML = artworks.map((art, index) => `
            <div class="art-card" onclick="openModal(${index})">
                <img class="art-image" src="${art.image}" alt="${art.title}" loading="lazy">
                <div class="art-info">
                    <h3 class="art-title">${art.title}</h3>
                    <p class="art-artist">${art.artist}</p>
                    <p class="art-date">${art.date}</p>
                    <span class="museum-badge">${art.museum}</span>
                </div>
            </div>
        `).join('');
    }

    function openModal(index) {
        const art = currentArtworks[index];
        
        document.getElementById('modalImage').src = art.fullImage;
        document.getElementById('modalTitle').textContent = art.title;
        document.getElementById('modalArtist').textContent = art.artist;
        
        let details = `<p><strong>ì†Œì¥:</strong> ${art.museum} ë¯¸ìˆ ê´€</p>`;
        if (art.date) details += `<p><strong>ì œì‘ ì—°ë„:</strong> ${art.date}</p>`;
        if (art.details.medium) details += `<p><strong>ì¬ë£Œ:</strong> ${art.details.medium}</p>`;
        if (art.details.dimensions) details += `<p><strong>í¬ê¸°:</strong> ${art.details.dimensions}</p>`;
        if (art.details.department) details += `<p><strong>ë¶€ì„œ:</strong> ${art.details.department}</p>`;
        if (art.details.culture) details += `<p><strong>ë¬¸í™”:</strong> ${art.details.culture}</p>`;
        if (art.details.division) details += `<p><strong>ë¶„ë¥˜:</strong> ${art.details.division}</p>`;
        
        document.getElementById('modalDetails').innerHTML = details;
        modal.classList.add('active');
    }

    function closeModal() {
        modal.classList.remove('active');
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
    });

    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

    // ì´ˆê¸° ë¡œë”©
    loadCategories();
</script>
```

</body>
</html>