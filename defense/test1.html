<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¤í”¼ ë°”ë¦¬ìŠ¤íƒ€ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Malgun Gothic', 'Apple Gothic', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: #333;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #FFF8DC;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .status-bar {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .status-item {
            text-align: center;
        }

        .status-item h3 {
            font-size: 0.9em;
            color: #8B4513;
            margin-bottom: 5px;
        }

        .status-item .value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2F4F2F;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            color: #8B4513;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background: rgba(139, 69, 19, 0.1);
        }

        .tab-button.active {
            background: #8B4513;
            color: white;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            min-height: 500px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* ì›ë‘ êµ¬ë§¤ í™”ë©´ */
        .bean-shop {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .bean-item {
            background: #FFF8DC;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #DEB887;
            text-align: center;
        }

        .bean-item h3 {
            color: #8B4513;
            margin-bottom: 10px;
        }

        .bean-info {
            margin: 10px 0;
            font-size: 0.9em;
        }

        .bean-price {
            font-weight: bold;
            color: #2F4F2F;
            margin: 10px 0;
        }

        .buy-button {
            background: #228B22;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        .buy-button:hover {
            background: #32CD32;
        }

        .buy-button:disabled {
            background: #A9A9A9;
            cursor: not-allowed;
        }

        /* ë¡œìŠ¤íŒ… í™”ë©´ */
        .roasting-station {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .roast-controls {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .control-group {
            text-align: center;
        }

        .control-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #8B4513;
        }

        .control-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #DEB887;
            border-radius: 5px;
            text-align: center;
        }

        .roast-button {
            background: #DC143C;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .roast-button:hover {
            background: #FF6347;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #DDD;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6347, #DC143C);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* ë“œë¦½ í™”ë©´ */
        .drip-station {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .drip-setup {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .ingredient-item {
            text-align: center;
            padding: 15px;
            background: #FFF8DC;
            border-radius: 10px;
            border: 2px solid #DEB887;
        }

        .drip-button {
            background: #8B4513;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .drip-button:hover {
            background: #A0522D;
        }

        /* ì§€ì‹ í™”ë©´ */
        .knowledge-library {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .knowledge-card {
            background: #FFF8DC;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #DEB887;
        }

        .knowledge-card h3 {
            color: #8B4513;
            margin-bottom: 10px;
        }

        .knowledge-card p {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .learn-button {
            background: #4169E1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        .learn-button:hover {
            background: #6495ED;
        }

        .learn-button.learned {
            background: #228B22;
        }

        /* ë©”ì‹œì§€ ì‹œìŠ¤í…œ */
        .message-area {
            position: fixed;
            top: 20px;
            right: 20px;
            max-width: 300px;
            z-index: 1000;
        }

        .message {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #8B4513;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .message.success {
            border-left-color: #228B22;
        }

        .message.error {
            border-left-color: #DC143C;
        }

        .message.info {
            border-left-color: #4169E1;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }

            .status-bar {
                flex-direction: column;
                gap: 10px;
            }

            .drip-setup {
                flex-direction: column;
            }

            .roast-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>â˜• ì»¤í”¼ ë°”ë¦¬ìŠ¤íƒ€ ê²Œì„</h1>
            <p>ì›ë‘ë¶€í„° ì™„ë²½í•œ ì»¤í”¼ê¹Œì§€, ë‹¹ì‹ ì˜ ë°”ë¦¬ìŠ¤íƒ€ ì—¬ì •ì„ ì‹œì‘í•˜ì„¸ìš”!</p>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <h3>ğŸ’° ìê¸ˆ</h3>
                <div class="value" id="money">10000ì›</div>
            </div>
            <div class="status-item">
                <h3>â­ ê²½í—˜ì¹˜</h3>
                <div class="value" id="experience">0 XP</div>
            </div>
            <div class="status-item">
                <h3>ğŸ“š ì§€ì‹ ë ˆë²¨</h3>
                <div class="value" id="knowledge-level">1</div>
            </div>
            <div class="status-item">
                <h3>â˜• ì™„ì„±ëœ ì»¤í”¼</h3>
                <div class="value" id="coffee-count">0ì”</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-button active" data-tab="shop">ğŸ›’ ì›ë‘ êµ¬ë§¤</button>
            <button class="tab-button" data-tab="roasting">ğŸ”¥ ë¡œìŠ¤íŒ…</button>
            <button class="tab-button" data-tab="drip">ğŸ’§ ë“œë¦½ ì¶”ì¶œ</button>
            <button class="tab-button" data-tab="knowledge">ğŸ“– ì§€ì‹ ìŠµë“</button>
            <button class="tab-button" data-tab="inventory">ğŸ“¦ ì¸ë²¤í† ë¦¬</button>
        </div>

        <div class="game-area">
            <!-- ì›ë‘ êµ¬ë§¤ í™”ë©´ -->
            <div id="shop-screen" class="screen active">
                <h2>ğŸ›’ ì›ë‘ êµ¬ë§¤</h2>
                <p>ì¢‹ì€ ì»¤í”¼ëŠ” ì¢‹ì€ ì›ë‘ì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì›ì¢…ê³¼ ë“±ê¸‰ì˜ ì›ë‘ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”.</p>
                <div class="bean-shop" id="bean-shop">
                    <!-- JavaScriptë¡œ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- ë¡œìŠ¤íŒ… í™”ë©´ -->
            <div id="roasting-screen" class="screen">
                <h2>ğŸ”¥ ë¡œìŠ¤íŒ… ìŠ¤í…Œì´ì…˜</h2>
                <p>ì›ë‘ì˜ ë§›ì„ ê²°ì •ì§“ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. ì˜¨ë„ì™€ ì‹œê°„ì„ ì •í™•íˆ ì¡°ì ˆí•˜ì„¸ìš”.</p>
                <div class="roasting-station">
                    <div class="roast-controls">
                        <div class="control-group">
                            <label for="roast-temp">ì˜¨ë„ (Â°C)</label>
                            <input type="number" id="roast-temp" class="control-input" value="200" min="150" max="250">
                        </div>
                        <div class="control-group">
                            <label for="roast-time">ì‹œê°„ (ë¶„)</label>
                            <input type="number" id="roast-time" class="control-input" value="12" min="8" max="20">
                        </div>
                        <div class="control-group">
                            <label for="bean-type-select">ì›ë‘ ì„ íƒ</label>
                            <select id="bean-type-select" class="control-input">
                                <option value="">ì›ë‘ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="roast-progress"></div>
                    </div>
                    <button id="start-roast" class="roast-button">ğŸ”¥ ë¡œìŠ¤íŒ… ì‹œì‘</button>
                    <div id="roast-result"></div>
                </div>
            </div>

            <!-- ë“œë¦½ ì¶”ì¶œ í™”ë©´ -->
            <div id="drip-screen" class="screen">
                <h2>ğŸ’§ ë“œë¦½ ì¶”ì¶œ</h2>
                <p>ì™„ë²½í•œ ì»¤í”¼ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¬¼ì˜ ì–‘, ì¶”ì¶œ ì‹œê°„, ì›ë‘ëŸ‰ì„ ì¡°ì ˆí•˜ì„¸ìš”.</p>
                <div class="drip-station">
                    <div class="drip-setup">
                        <div class="control-group">
                            <label for="water-amount">ë¬¼ì˜ ì–‘ (ml)</label>
                            <input type="number" id="water-amount" class="control-input" value="200" min="100" max="300">
                        </div>
                        <div class="control-group">
                            <label for="brew-time">ì¶”ì¶œ ì‹œê°„ (ì´ˆ)</label>
                            <input type="number" id="brew-time" class="control-input" value="240" min="120" max="360">
                        </div>
                        <div class="control-group">
                            <label for="coffee-amount">ì›ë‘ëŸ‰ (g)</label>
                            <input type="number" id="coffee-amount" class="control-input" value="20" min="10" max="30">
                        </div>
                        <div class="control-group">
                            <label for="roasted-bean-select">ë¡œìŠ¤íŒ…ëœ ì›ë‘</label>
                            <select id="roasted-bean-select" class="control-input">
                                <option value="">ì›ë‘ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="drip-progress"></div>
                    </div>
                    <button id="start-drip" class="drip-button">ğŸ’§ ë“œë¦½ ì‹œì‘</button>
                    <div id="drip-result"></div>
                </div>
            </div>

            <!-- ì§€ì‹ ìŠµë“ í™”ë©´ -->
            <div id="knowledge-screen" class="screen">
                <h2>ğŸ“– ì»¤í”¼ ì§€ì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬</h2>
                <p>ì»¤í”¼ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì§€ì‹ì„ ìŠµë“í•˜ì—¬ ë” ë‚˜ì€ ë°”ë¦¬ìŠ¤íƒ€ê°€ ë˜ì„¸ìš”.</p>
                <div class="knowledge-library" id="knowledge-library">
                    <!-- JavaScriptë¡œ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- ì¸ë²¤í† ë¦¬ í™”ë©´ -->
            <div id="inventory-screen" class="screen">
                <h2>ğŸ“¦ ì¸ë²¤í† ë¦¬</h2>
                <p>ë³´ìœ í•˜ê³  ìˆëŠ” ì›ë‘ì™€ ë¡œìŠ¤íŒ…ëœ ì›ë‘ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                <div id="inventory-content">
                    <div class="inventory-section">
                        <h3>ğŸŒ± ìƒì›ë‘</h3>
                        <div id="green-beans-list"></div>
                    </div>
                    <div class="inventory-section">
                        <h3>ğŸ”¥ ë¡œìŠ¤íŒ…ëœ ì›ë‘</h3>
                        <div id="roasted-beans-list"></div>
                    </div>
                    <div class="inventory-section">
                        <h3>â˜• ì™„ì„±ëœ ì»¤í”¼</h3>
                        <div id="finished-coffees-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="message-area" id="message-area"></div>

    <script>
        // ê²Œì„ ìƒíƒœ ê´€ë¦¬
        class CoffeeBaristaGame {
            constructor() {
                this.money = 10000;
                this.experience = 0;
                this.knowledgeLevel = 1;
                this.coffeeCount = 0;

                // ì¸ë²¤í† ë¦¬
                this.greenBeans = [];
                this.roastedBeans = [];
                this.finishedCoffees = [];

                // ì›ë‘ ë°ì´í„°
                this.beanTypes = [
                    {
                        id: 'ethiopia_yirgacheffe',
                        name: 'ì—í‹°ì˜¤í”¼ì•„ ì˜ˆê°€ì²´í”„',
                        price: 5000,
                        quality: 'í”„ë¦¬ë¯¸ì—„',
                        notes: 'ê½ƒí–¥, ë°ì€ ì‚°ë¯¸, ë³µí•©ì ì¸ í’ë¯¸',
                        description: 'ì„¸ê³„ì ìœ¼ë¡œ ìœ ëª…í•œ ì—í‹°ì˜¤í”¼ì•„ì˜ íŠ¹ì‚°í’ˆìœ¼ë¡œ, ë°ì€ ì‚°ë¯¸ì™€ ë³µí•©ì ì¸ í’ë¯¸ê°€ íŠ¹ì§•ì…ë‹ˆë‹¤.'
                    },
                    {
                        id: 'colombia_supremo',
                        name: 'ì½œë¡¬ë¹„ì•„ ìˆ˜í”„ë¦¬ëª¨',
                        price: 3500,
                        quality: 'ìŠ¤í˜ì…œí‹°',
                        notes: 'ê· í˜• ì¡íŒ ë°”ë””, ì¹´ë¼ë©œ, ì´ˆì½œë¦¿',
                        description: 'ì½œë¡¬ë¹„ì•„ ê³ ì‚°ì§€ëŒ€ì—ì„œ ì¬ë°°ë˜ëŠ” ê³ í’ˆì§ˆ ì›ë‘ë¡œ, ê· í˜• ì¡íŒ ë§›ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.'
                    },
                    {
                        id: 'brazil_santos',
                        name: 'ë¸Œë¼ì§ˆ ì‚°í† ìŠ¤',
                        price: 2800,
                        quality: 'ìƒì—…ìš©',
                        notes: 'ë¶€ë“œëŸ¬ìš´ ë°”ë””, ë‚®ì€ ì‚°ë¯¸, ë„ˆíŠ¸',
                        description: 'ì„¸ê³„ ìµœëŒ€ ì»¤í”¼ ìƒì‚°êµ­ì˜ ëŒ€í‘œì ì¸ ì›ë‘ë¡œ, ë¶€ë“œëŸ¬ìš´ ë§›ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.'
                    },
                    {
                        id: 'guatemala_antigua',
                        name: 'ê³¼í…Œë§ë¼ ì•ˆí‹°êµ¬ì•„',
                        price: 4200,
                        quality: 'ìŠ¤í˜ì…œí‹°',
                        notes: 'ê°•í•œ ë°”ë””, ìŠ¤ëª¨í‚¤, ì¹´ë¼ë©œ',
                        description: 'í™”ì‚°í† ì–‘ì—ì„œ ì¬ë°°ë˜ì–´ ë…íŠ¹í•œ ìŠ¤ëª¨í‚¤í•œ í’ë¯¸ë¥¼ ê°€ì§„ ì›ë‘ì…ë‹ˆë‹¤.'
                    }
                ];

                // ì§€ì‹ ë°ì´í„°
                this.knowledgeItems = [
                    {
                        id: 'coffee_origins',
                        title: 'ì»¤í”¼ì˜ ê¸°ì›',
                        content: 'ì»¤í”¼ëŠ” 9ì„¸ê¸°ê²½ ì—í‹°ì˜¤í”¼ì•„ì—ì„œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì–‘ì¹˜ê¸° ì¹¼ë””ê°€ ì–‘ë“¤ì´ ì»¤í”¼ ì—´ë§¤ë¥¼ ë¨¹ê³  í™œê¸°ì°¨ê²Œ ë›°ë…¸ëŠ” ê²ƒì„ ë³´ê³  ë°œê²¬í–ˆë‹¤ëŠ” ì „ì„¤ì´ ìˆìŠµë‹ˆë‹¤.',
                        xpReward: 50,
                        learned: false
                    },
                    {
                        id: 'roasting_levels',
                        title: 'ë¡œìŠ¤íŒ… ë‹¨ê³„',
                        content: 'ì»¤í”¼ ë¡œìŠ¤íŒ…ì€ ë¼ì´íŠ¸, ë¯¸ë””ì—„, ë‹¤í¬ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ë¼ì´íŠ¸ ë¡œìŠ¤íŠ¸ëŠ” ë°ì€ ì‚°ë¯¸, ë¯¸ë””ì—„ì€ ê· í˜•, ë‹¤í¬ëŠ” ê°•í•œ ë°”ë””ì™€ ì“´ë§›ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.',
                        xpReward: 75,
                        learned: false
                    },
                    {
                        id: 'drip_brewing',
                        content: 'ë“œë¦½ ì»¤í”¼ëŠ” ë¬¼ì˜ ì˜¨ë„(90-96Â°C), ì¶”ì¶œ ì‹œê°„(2-4ë¶„), ì›ë‘ì™€ ë¬¼ì˜ ë¹„ìœ¨(1:15-1:18)ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë„ˆë¬´ ì„¸ê²Œ ë¶€ìœ¼ë©´ ì“´ë§›ì´ ë‚˜ê³ , ì•½í•˜ê²Œ ë¶€ìœ¼ë©´ ì‹œí¼í•œ ë§›ì´ ë‚©ë‹ˆë‹¤.',
                        xpReward: 100,
                        learned: false
                    },
                    {
                        id: 'coffee_tasting',
                        title: 'ì»¤í”¼ í…Œì´ìŠ¤íŒ…',
                        content: 'ì»¤í”¼ ë§› í‰ê°€ ì‹œ ì‚°ë¯¸(Acidity), ë‹¨ë§›(Sweetness), ë°”ë””(Body), ë°¸ëŸ°ìŠ¤(Balance), ì• í”„í„°í…Œì´ìŠ¤íŠ¸(Aftertaste)ë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤.',
                        xpReward: 80,
                        learned: false
                    },
                    {
                        id: 'bean_grading',
                        title: 'ì›ë‘ ë“±ê¸‰',
                        content: 'ì»¤í”¼ ì›ë‘ëŠ” ê²°í•¨ë‘ ìˆ˜ì— ë”°ë¼ ë“±ê¸‰ì´ ë§¤ê²¨ì§‘ë‹ˆë‹¤. ìŠ¤í˜ì…œí‹° ë“±ê¸‰ì€ 80ì  ì´ìƒìœ¼ë¡œ, ê²°í•¨ì´ ê±°ì˜ ì—†ëŠ” ê³ í’ˆì§ˆ ì›ë‘ì…ë‹ˆë‹¤.',
                        xpReward: 60,
                        learned: false
                    }
                ];

                this.initializeGame();
                this.setupEventListeners();
            }

            initializeGame() {
                this.updateUI();
                this.renderBeanShop();
                this.renderKnowledgeLibrary();
                this.updateInventory();
            }

            setupEventListeners() {
                // íƒ­ ì „í™˜
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const tabId = button.dataset.tab;
                        this.switchTab(tabId);
                    });
                });

                // ë¡œìŠ¤íŒ… ì‹œì‘
                document.getElementById('start-roast').addEventListener('click', () => {
                    this.startRoasting();
                });

                // ë“œë¦½ ì‹œì‘
                document.getElementById('start-drip').addEventListener('click', () => {
                    this.startDrip();
                });
            }

            switchTab(tabId) {
                // íƒ­ ë²„íŠ¼ í™œì„±í™”
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');

                // í™”ë©´ ì „í™˜
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(`${tabId}-screen`).classList.add('active');

                // íŠ¹ì • íƒ­ ì´ˆê¸°í™”
                if (tabId === 'roasting') {
                    this.updateRoastingOptions();
                } else if (tabId === 'drip') {
                    this.updateDripOptions();
                }
            }

            updateUI() {
                document.getElementById('money').textContent = this.money.toLocaleString() + 'ì›';
                document.getElementById('experience').textContent = this.experience + ' XP';
                document.getElementById('knowledge-level').textContent = this.knowledgeLevel;
                document.getElementById('coffee-count').textContent = this.coffeeCount + 'ì”';
            }

            renderBeanShop() {
                const shop = document.getElementById('bean-shop');
                shop.innerHTML = '';

                this.beanTypes.forEach(bean => {
                    const beanElement = document.createElement('div');
                    beanElement.className = 'bean-item';
                    beanElement.innerHTML = `
                        <h3>${bean.name}</h3>
                        <div class="bean-info">
                            <strong>ë“±ê¸‰:</strong> ${bean.quality}<br>
                            <strong>íŠ¹ì§•:</strong> ${bean.notes}
                        </div>
                        <p class="bean-price">ğŸ’° ${bean.price.toLocaleString()}ì›/100g</p>
                        <button class="buy-button" onclick="game.buyBean('${bean.id}')">
                            êµ¬ë§¤í•˜ê¸°
                        </button>
                    `;
                    shop.appendChild(beanElement);
                });
            }

            buyBean(beanId) {
                const bean = this.beanTypes.find(b => b.id === beanId);
                if (!bean) return;

                if (this.money >= bean.price) {
                    this.money -= bean.price;
                    this.addGreenBean(bean);
                    this.updateUI();
                    this.showMessage(`âœ… ${bean.name} 100gì„ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!`, 'success');
                } else {
                    this.showMessage('âŒ ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'error');
                }
            }

            addGreenBean(beanType) {
                const existing = this.greenBeans.find(b => b.id === beanType.id);
                if (existing) {
                    existing.amount += 100;
                } else {
                    this.greenBeans.push({
                        ...beanType,
                        amount: 100
                    });
                }
                this.updateInventory();
            }

            updateRoastingOptions() {
                const select = document.getElementById('bean-type-select');
                select.innerHTML = '<option value="">ì›ë‘ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';

                this.greenBeans.forEach(bean => {
                    if (bean.amount > 0) {
                        const option = document.createElement('option');
                        option.value = bean.id;
                        option.textContent = `${bean.name} (${bean.amount}g)`;
                        select.appendChild(option);
                    }
                });
            }

            startRoasting() {
                const temp = parseInt(document.getElementById('roast-temp').value);
                const time = parseInt(document.getElementById('roast-time').value);
                const beanId = document.getElementById('bean-type-select').value;

                if (!beanId) {
                    this.showMessage('âŒ ë¡œìŠ¤íŒ…í•  ì›ë‘ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!', 'error');
                    return;
                }

                const bean = this.greenBeans.find(b => b.id === beanId);
                if (!bean || bean.amount < 20) {
                    this.showMessage('âŒ ë¡œìŠ¤íŒ…í•  ì›ë‘ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'error');
                    return;
                }

                // ë¡œìŠ¤íŒ… ì§„í–‰
                this.showMessage('ğŸ”¥ ë¡œìŠ¤íŒ…ì„ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
                const progressBar = document.getElementById('roast-progress');
                const button = document.getElementById('start-roast');
                button.disabled = true;

                let progress = 0;
                const interval = setInterval(() => {
                    progress += 2;
                    progressBar.style.width = progress + '%';

                    if (progress >= 100) {
                        clearInterval(interval);
                        this.completeRoasting(bean, temp, time);
                        button.disabled = false;
                        progressBar.style.width = '0%';
                    }
                }, 100);
            }

            completeRoasting(bean, temp, time) {
                bean.amount -= 20;

                // ë¡œìŠ¤íŒ… í’ˆì§ˆ ê³„ì‚°
                let quality = 'ë³´í†µ';
                let qualityScore = 50;

                // ì´ìƒì ì¸ ë¡œìŠ¤íŒ… ì¡°ê±´
                const idealTemp = 200;
                const idealTime = 12;

                const tempDiff = Math.abs(temp - idealTemp);
                const timeDiff = Math.abs(time - idealTime);

                qualityScore = 100 - (tempDiff * 2) - (timeDiff * 3);
                qualityScore = Math.max(10, Math.min(100, qualityScore));

                if (qualityScore >= 80) quality = 'ì™„ë²½';
                else if (qualityScore >= 60) quality = 'ì¢‹ìŒ';
                else if (qualityScore >= 40) quality = 'ë³´í†µ';
                else quality = 'ë‚˜ì¨';

                const roastedBean = {
                    id: bean.id + '_roasted_' + Date.now(),
                    originalBean: bean,
                    quality: quality,
                    qualityScore: qualityScore,
                    roastTemp: temp,
                    roastTime: time,
                    amount: 20
                };

                this.roastedBeans.push(roastedBean);
                this.experience += 25;
                this.updateUI();
                this.updateInventory();

                const resultDiv = document.getElementById('roast-result');
                resultDiv.innerHTML = `
                    <div style="text-align: center; margin: 20px 0;">
                        <h3>ë¡œìŠ¤íŒ… ì™„ë£Œ! ğŸ‰</h3>
                        <p>í’ˆì§ˆ: <strong>${quality}</strong> (ì ìˆ˜: ${qualityScore})</p>
                        <p>ê²½í—˜ì¹˜ +25 XP</p>
                    </div>
                `;

                this.showMessage(`ğŸ”¥ ${bean.name} ë¡œìŠ¤íŒ…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! í’ˆì§ˆ: ${quality}`, 'success');
            }

            updateDripOptions() {
                const select = document.getElementById('roasted-bean-select');
                select.innerHTML = '<option value="">ì›ë‘ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';

                this.roastedBeans.forEach(bean => {
                    if (bean.amount > 0) {
                        const option = document.createElement('option');
                        option.value = bean.id;
                        option.textContent = `${bean.originalBean.name} (${bean.quality}, ${bean.amount}g)`;
                        select.appendChild(option);
                    }
                });
            }

            startDrip() {
                const waterAmount = parseInt(document.getElementById('water-amount').value);
                const brewTime = parseInt(document.getElementById('brew-time').value);
                const coffeeAmount = parseInt(document.getElementById('coffee-amount').value);
                const beanId = document.getElementById('roasted-bean-select').value;

                if (!beanId) {
                    this.showMessage('âŒ ì¶”ì¶œí•  ì›ë‘ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!', 'error');
                    return;
                }

                const bean = this.roastedBeans.find(b => b.id === beanId);
                if (!bean || bean.amount < coffeeAmount) {
                    this.showMessage('âŒ ì¶”ì¶œí•  ì›ë‘ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'error');
                    return;
                }

                // ë“œë¦½ ì§„í–‰
                this.showMessage('ğŸ’§ ë“œë¦½ ì¶”ì¶œì„ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
                const progressBar = document.getElementById('drip-progress');
                const button = document.getElementById('start-drip');
                button.disabled = true;

                let progress = 0;
                const interval = setInterval(() => {
                    progress += 1;
                    progressBar.style.width = progress + '%';

                    if (progress >= 100) {
                        clearInterval(interval);
                        this.completeDrip(bean, waterAmount, brewTime, coffeeAmount);
                        button.disabled = false;
                        progressBar.style.width = '0%';
                    }
                }, 50);
            }

            completeDrip(bean, waterAmount, brewTime, coffeeAmount) {
                bean.amount -= coffeeAmount;

                // ë“œë¦½ í’ˆì§ˆ ê³„ì‚°
                const ratio = waterAmount / coffeeAmount;
                const idealRatio = 15; // 1:15 ë¹„ìœ¨ì´ ì´ìƒì 
                const timeIdeal = 240; // 4ë¶„ì´ ì´ìƒì 

                let qualityScore = bean.qualityScore;
                const ratioDiff = Math.abs(ratio - idealRatio);
                const timeDiff = Math.abs(brewTime - timeIdeal);

                qualityScore -= (ratioDiff * 5) + (timeDiff / 10);
                qualityScore = Math.max(0, Math.min(100, qualityScore));

                let quality = 'ë³´í†µ';
                if (qualityScore >= 80) quality = 'ì™„ë²½';
                else if (qualityScore >= 60) quality = 'ì¢‹ìŒ';
                else if (qualityScore >= 40) quality = 'ë³´í†µ';
                else quality = 'ë‚˜ì¨';

                const coffee = {
                    id: 'coffee_' + Date.now(),
                    bean: bean,
                    quality: quality,
                    qualityScore: qualityScore,
                    waterAmount: waterAmount,
                    brewTime: brewTime,
                    coffeeAmount: coffeeAmount,
                    createdAt: new Date()
                };

                this.finishedCoffees.push(coffee);
                this.coffeeCount++;
                this.experience += 50;
                this.money += qualityScore * 10; // ì»¤í”¼ íŒë§¤ë¡œ ìˆ˜ìµ
                this.updateUI();
                this.updateInventory();

                const resultDiv = document.getElementById('drip-result');
                resultDiv.innerHTML = `
                    <div style="text-align: center; margin: 20px 0;">
                        <h3>ë“œë¦½ ì™„ë£Œ! â˜•</h3>
                        <p>í’ˆì§ˆ: <strong>${quality}</strong> (ì ìˆ˜: ${qualityScore})</p>
                        <p>íŒë§¤ ìˆ˜ìµ: +${(qualityScore * 10).toLocaleString()}ì›</p>
                        <p>ê²½í—˜ì¹˜ +50 XP</p>
                    </div>
                `;

                this.showMessage(`â˜• ì™„ë²½í•œ ì»¤í”¼ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! í’ˆì§ˆ: ${quality}`, 'success');

                // ë ˆë²¨ì—… ì²´í¬
                this.checkLevelUp();
            }

            checkLevelUp() {
                const newLevel = Math.floor(this.experience / 500) + 1;
                if (newLevel > this.knowledgeLevel) {
                    this.knowledgeLevel = newLevel;
                    this.showMessage(`ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ì§€ì‹ ë ˆë²¨ì´ ${this.knowledgeLevel}ë¡œ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤!`, 'success');
                    this.updateUI();
                }
            }

            renderKnowledgeLibrary() {
                const library = document.getElementById('knowledge-library');
                library.innerHTML = '';

                this.knowledgeItems.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'knowledge-card';
                    card.innerHTML = `
                        <h3>${item.title}</h3>
                        <p>${item.content}</p>
                        <p><strong>ë³´ìƒ: ${item.xpReward} XP</strong></p>
                        <button class="learn-button ${item.learned ? 'learned' : ''}"
                                onclick="game.learnKnowledge('${item.id}')"
                                ${item.learned ? 'disabled' : ''}>
                            ${item.learned ? 'âœ… í•™ìŠµì™„ë£Œ' : 'ğŸ“– í•™ìŠµí•˜ê¸°'}
                        </button>
                    `;
                    library.appendChild(card);
                });
            }

            learnKnowledge(itemId) {
                const item = this.knowledgeItems.find(i => i.id === itemId);
                if (!item || item.learned) return;

                item.learned = true;
                this.experience += item.xpReward;
                this.updateUI();
                this.renderKnowledgeLibrary();
                this.showMessage(`ğŸ“– "${item.title}"ì„ í•™ìŠµí–ˆìŠµë‹ˆë‹¤! ê²½í—˜ì¹˜ +${item.xpReward} XP`, 'success');
                this.checkLevelUp();
            }

            updateInventory() {
                // ìƒì›ë‘ ëª©ë¡
                const greenBeansList = document.getElementById('green-beans-list');
                greenBeansList.innerHTML = '';

                if (this.greenBeans.length === 0) {
                    greenBeansList.innerHTML = '<p>ë³´ìœ í•œ ìƒì›ë‘ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                } else {
                    this.greenBeans.forEach(bean => {
                        const item = document.createElement('div');
                        item.className = 'inventory-item';
                        item.innerHTML = `
                            <h4>${bean.name}</h4>
                            <p>ìˆ˜ëŸ‰: ${bean.amount}g | ë“±ê¸‰: ${bean.quality}</p>
                            <p>íŠ¹ì§•: ${bean.notes}</p>
                        `;
                        greenBeansList.appendChild(item);
                    });
                }

                // ë¡œìŠ¤íŒ…ëœ ì›ë‘ ëª©ë¡
                const roastedBeansList = document.getElementById('roasted-beans-list');
                roastedBeansList.innerHTML = '';

                if (this.roastedBeans.length === 0) {
                    roastedBeansList.innerHTML = '<p>ë¡œìŠ¤íŒ…ëœ ì›ë‘ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                } else {
                    this.roastedBeans.forEach(bean => {
                        const item = document.createElement('div');
                        item.className = 'inventory-item';
                        item.innerHTML = `
                            <h4>${bean.originalBean.name} (ë¡œìŠ¤íŒ…ë¨)</h4>
                            <p>ìˆ˜ëŸ‰: ${bean.amount}g | í’ˆì§ˆ: ${bean.quality} (${bean.qualityScore}ì )</p>
                            <p>ë¡œìŠ¤íŒ…: ${bean.roastTemp}Â°C, ${bean.roastTime}ë¶„</p>
                        `;
                        roastedBeansList.appendChild(item);
                    });
                }

                // ì™„ì„±ëœ ì»¤í”¼ ëª©ë¡
                const finishedCoffeesList = document.getElementById('finished-coffees-list');
                finishedCoffeesList.innerHTML = '';

                if (this.finishedCoffees.length === 0) {
                    finishedCoffeesList.innerHTML = '<p>ì™„ì„±ëœ ì»¤í”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                } else {
                    // ìµœê·¼ 5ê°œë§Œ í‘œì‹œ
                    const recentCoffees = this.finishedCoffees.slice(-5);
                    recentCoffees.forEach(coffee => {
                        const item = document.createElement('div');
                        item.className = 'inventory-item';
                        item.innerHTML = `
                            <h4>ì»¤í”¼ #${coffee.id.split('_')[1]}</h4>
                            <p>í’ˆì§ˆ: ${coffee.quality} (${coffee.qualityScore}ì )</p>
                            <p>ì‚¬ìš© ì›ë‘: ${coffee.bean.originalBean.name}</p>
                            <p>ë¹„ìœ¨: 1:${Math.round(coffee.waterAmount/coffee.coffeeAmount)}</p>
                        `;
                        finishedCoffeesList.appendChild(item);
                    });
                }
            }

            showMessage(text, type = 'info') {
                const messageArea = document.getElementById('message-area');
                const message = document.createElement('div');
                message.className = `message ${type}`;
                message.textContent = text;

                messageArea.appendChild(message);

                // 3ì´ˆ í›„ ìë™ ì œê±°
                setTimeout(() => {
                    message.remove();
                }, 3000);
            }
        }

        // ê²Œì„ ì‹œì‘
        const game = new CoffeeBaristaGame();
    </script>
</body>
</html>