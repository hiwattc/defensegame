<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git Ninja Chronicles ğŸ¥·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #00ff41;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* HUD */
        .hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 30px;
            border: 2px solid #00ff41;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
        }

        .hud-item {
            font-size: 18px;
            font-weight: bold;
        }

        .timer {
            color: #ff6b6b;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Main Game Area */
        .game-area {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .graph-panel {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px;
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #00ff41;
        }

        .before-header { color: #ff6b6b; }
        .after-header { color: #51cf66; }

        .graph {
            flex: 1;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre;
            overflow: hidden;
            position: relative;
        }

        .head-indicator {
            position: absolute;
            top: 0;
            right: 0;
            background: #ffeb3b;
            color: #000;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Terminal */
        .terminal {
            background: #000;
            border: 3px solid #00ff41;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .terminal-header {
            color: #00ff41;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .command-input-container {
            position: relative;
            margin-bottom: 20px;
        }

        #command-input {
            width: 100%;
            background: #000;
            border: 2px solid #00ff41;
            color: #00ff41;
            padding: 15px 50px 15px 20px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            border-radius: 10px;
            outline: none;
        }

        #command-input::placeholder {
            color: #666;
        }

        .prompt {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #00ff41;
            font-weight: bold;
            pointer-events: none;
        }

        .terminal-output {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .output-line {
            margin: 5px 0;
            padding: 3px 0;
        }

        .success { color: #51cf66; }
        .error { color: #ff6b6b; }
        .hint { color: #ffd43b; }

        /* Hint Buttons */
        .hint-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .btn-hint {
            background: linear-gradient(45deg, #ffd43b, #ffeb3b);
            color: #000;
        }

        .btn-hint:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .btn-solution {
            background: linear-gradient(45deg, #51cf66, #00ff41);
            color: #000;
            box-shadow: 0 0 20px rgba(81, 207, 102, 0.5);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* Level Info */
        .level-info {
            grid-column: 1 / -1;
            text-align: center;
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid #00ff41;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .level-title {
            font-size: 28px;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00ff41, #51cf66);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .level-description {
            font-size: 16px;
            color: #ccc;
        }

        /* Success Animation */
        .success-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(81, 207, 102, 0.3) 0%, transparent 70%);
            display: none;
            z-index: 1000;
            animation: successPulse 0.6s ease-out;
        }

        @keyframes successPulse {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        /* Stars */
        .stars {
            display: inline-flex;
            gap: 5px;
            font-size: 24px;
        }

        .star {
            transition: all 0.3s ease;
        }

        .star.filled { color: #ffd700; text-shadow: 0 0 10px #ffd700; }
        .star.empty { color: #666; }

        /* Responsive */
        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .hud {
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Success Overlay -->
        <div class="success-overlay" id="successOverlay"></div>

        <!-- HUD -->
        <div class="hud">
            <div class="hud-item">
                ğŸ¥· <span id="level">1</span>/10
            </div>
            <div class="hud-item">
                â­ <span class="stars" id="stars">
                    <span class="star empty">â˜…</span>
                    <span class="star empty">â˜…</span>
                    <span class="star empty">â˜…</span>
                </span>
            </div>
            <div class="hud-item timer">
                â±ï¸ <span id="timer">60</span>s
            </div>
            <div class="hud-item">
                âš¡ <span id="combo">0</span>x
            </div>
            <div class="hud-item">
                ğŸ’ <span id="score">0</span>
            </div>
        </div>

        <!-- Level Info -->
        <div class="level-info">
            <div class="level-title" id="levelTitle">ì²« ë²ˆì§¸ ì»¤ë°‹!</div>
            <div class="level-description" id="levelDesc">
                ë¹ˆ ì €ì¥ì†Œì— ì²« ë²ˆì§¸ ì»¤ë°‹ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”!
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area">
            <div class="graph-panel">
                <div class="panel-header before-header">
                    ğŸ“Š í˜„ì¬ ìƒíƒœ (Before)
                </div>
                <div class="graph" id="beforeGraph"></div>
            </div>
            <div class="graph-panel">
                <div class="panel-header after-header">
                    ğŸ¯ ëª©í‘œ ìƒíƒœ (After)
                </div>
                <div class="graph" id="afterGraph"></div>
            </div>
        </div>

        <!-- Terminal -->
        <div class="terminal">
            <div class="terminal-header">ğŸ’» Git Terminal</div>
            <div class="command-input-container">
                <div class="prompt">git&gt;</div>
                <input type="text" id="command-input" placeholder="ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê³  Enterë¥¼ ëˆ„ë¥´ì„¸ìš”..." autocomplete="off">
            </div>
            <div class="terminal-output" id="terminalOutput"></div>
            <div class="hint-buttons">
                <button class="btn btn-hint" id="hintBtn">ğŸ’¡ íŒíŠ¸ (3/3)</button>
                <button class="btn btn-solution" id="solutionBtn">âœ… ì •ë‹µë³´ê¸° (â­2)</button>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ë°ì´í„°
        const levels = [
            {
                title: "ì²« ë²ˆì§¸ ì»¤ë°‹!",
                description: "ë¹ˆ ì €ì¥ì†Œì— ì²« ë²ˆì§¸ ì»¤ë°‹ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”!",
                before: "  ",
                after: "* A",
                solution: "commit",
                hints: [
                    "ì²« ë²ˆì§¸ íŒŒì¼ì„ ì €ì¥ì†Œì— ì¶”ê°€í•´ì•¼ í•´ìš”!",
                    "ê°„ë‹¨í•œ ëª…ë ¹ì–´ í•˜ë‚˜ë§Œ ì…ë ¥í•˜ì„¸ìš”",
                    "`git commit`ìœ¼ë¡œ ì‹œì‘!"
                ]
            },
            {
                title: "ë¸Œëœì¹˜ ìƒì„±",
                description: "ìƒˆë¡œìš´ feature ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”!",
                before: "* A\n  ",
                after: "* A\n|\n* master",
                solution: "branch feature",
                hints: [
                    "ìƒˆë¡œìš´ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì•¼ í•´ìš”!",
                    "`git branch <ì´ë¦„>` í˜•ì‹",
                    "`feature`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ!"
                ]
            },
            {
                title: "ë¸Œëœì¹˜ ì´ë™",
                description: "feature ë¸Œëœì¹˜ë¡œ ì´ë™í•´ì£¼ì„¸ìš”!",
                before: "* A\n|\n* master",
                after: "* A\n|\n* feature â† HEAD",
                solution: "checkout feature",
                hints: [
                    "ë‹¤ë¥¸ ë¸Œëœì¹˜ë¡œ ì´ë™í•´ì•¼ í•´ìš”!",
                    "`git checkout` ëª…ë ¹ì–´",
                    "`feature`ë¡œ ì´ë™!"
                ]
            },
            {
                title: "ê°„ë‹¨í•œ ë³‘í•©",
                description: "feature ë¸Œëœì¹˜ë¥¼ masterì— ë³‘í•©í•´ì£¼ì„¸ìš”!",
                before: "* C\n|\n* B\n|\n* A\n* master",
                after: "* D\n|\n* C\n|\n* B\n|\n* A\n* master â† HEAD",
                solution: "merge feature",
                hints: [
                    "ë‘ ë¸Œëœì¹˜ë¥¼ í•©ì³ì•¼ í•´ìš”!",
                    "`git merge` ëª…ë ¹ì–´",
                    "`feature`ë¥¼ masterì—!"
                ]
            },
            {
                title: "ë¦¬ë² ì´ìŠ¤ ë§ˆë²•",
                description: "feature ë¸Œëœì¹˜ë¥¼ master ìœ„ì— ì¬ì •ë ¬í•´ì£¼ì„¸ìš”!",
                before: "  C\n /\n* B â† HEAD\n|\n* A\n* master",
                after: "* C'\n|\n* B â† HEAD\n|\n* A\n* master",
                solution: "rebase master",
                hints: [
                    "ì»¤ë°‹ ìˆœì„œë¥¼ ë°”ê¿”ì•¼ í•´ìš”!",
                    "`git rebase`ë¡œ...",
                    "`master` ìœ„ì— ì¬ë°°ì¹˜!"
                ]
            }
        ];

        // ê²Œì„ ìƒíƒœ
        let currentLevel = 0;
        let timer = 60;
        let combo = 0;
        let score = 0;
        let hintsUsed = 0;
        let gameTimer;
        let isGameActive = false;

        // DOM ìš”ì†Œë“¤
        const elements = {
            level: document.getElementById('level'),
            levelTitle: document.getElementById('levelTitle'),
            levelDesc: document.getElementById('levelDesc'),
            stars: document.getElementById('stars'),
            timer: document.getElementById('timer'),
            combo: document.getElementById('combo'),
            score: document.getElementById('score'),
            beforeGraph: document.getElementById('beforeGraph'),
            afterGraph: document.getElementById('afterGraph'),
            commandInput: document.getElementById('command-input'),
            terminalOutput: document.getElementById('terminalOutput'),
            hintBtn: document.getElementById('hintBtn'),
            solutionBtn: document.getElementById('solutionBtn'),
            successOverlay: document.getElementById('successOverlay')
        };

        // ë³„ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateStars(starsEarned) {
            const starElements = elements.stars.querySelectorAll('.star');
            starElements.forEach((star, index) => {
                if (index < starsEarned) {
                    star.classList.add('filled');
                    star.classList.remove('empty');
                } else {
                    star.classList.add('empty');
                    star.classList.remove('filled');
                }
            });
        }

        // í„°ë¯¸ë„ ì¶œë ¥
        function addTerminalOutput(text, type = 'normal') {
            const line = document.createElement('div');
            line.className = `output-line ${type}`;
            line.textContent = `git> ${text}`;
            elements.terminalOutput.appendChild(line);
            elements.terminalOutput.scrollTop = elements.terminalOutput.scrollHeight;
        }

        // íŒíŠ¸ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateHintButton() {
            const remainingHints = 3 - hintsUsed;
            elements.hintBtn.textContent = `ğŸ’¡ íŒíŠ¸ (${remainingHints}/3)`;
            elements.hintBtn.disabled = remainingHints === 0;
        }

        // ë ˆë²¨ ë¡œë“œ
        function loadLevel(levelIndex) {
            const level = levels[levelIndex];
            currentLevel = levelIndex;

            // UI ì—…ë°ì´íŠ¸
            elements.level.textContent = levelIndex + 1;
            elements.levelTitle.textContent = level.title;
            elements.levelDesc.textContent = level.description;
            elements.beforeGraph.textContent = level.before;
            elements.afterGraph.textContent = level.after;

            // ìƒíƒœ ì´ˆê¸°í™”
            timer = 60;
            hintsUsed = 0;
            updateStars(0);
            elements.terminalOutput.innerHTML = '';
            elements.commandInput.value = '';
            elements.commandInput.focus();

            updateHintButton();
            addTerminalOutput(`ë ˆë²¨ ${levelIndex + 1} ì‹œì‘! "${level.solution}"ì„ ì…ë ¥í•´ë³´ì„¸ìš”.`, 'success');

            // íƒ€ì´ë¨¸ ì‹œì‘
            if (isGameActive) clearInterval(gameTimer);
            isGameActive = true;
            gameTimer = setInterval(updateTimer, 1000);
        }

        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            timer--;
            elements.timer.textContent = timer;

            if (timer <= 0) {
                clearInterval(gameTimer);
                isGameActive = false;
                gameOver('ì‹œê°„ ì´ˆê³¼! ğŸ˜µ');
            }
        }

        // ëª…ë ¹ì–´ ì²´í¬
        function checkCommand(input) {
            const level = levels[currentLevel];
            const userInput = input.trim().toLowerCase().replace(/\s+/g, ' ');

            if (userInput === level.solution) {
                clearInterval(gameTimer);
                isGameActive = false;
                success();
            } else {
                addTerminalOutput('âŒ ì˜ëª»ëœ ëª…ë ¹ì–´ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”!', 'error');
                elements.commandInput.value = '';
                elements.commandInput.focus();
            }
        }

        // ì„±ê³µ!
        function success() {
            const timeBonus = timer * 5;
            const speedBonus = timer > 58 ? 50 : 0;
            const comboBonus = Math.pow(2, combo);
            const baseScore = 100;
            const starsEarned = timer >= 45 ? 3 : timer >= 30 ? 2 : 1;
            const levelScore = (baseScore + timeBonus + speedBonus) * comboBonus;

            score += levelScore;
            combo++;

            // ë³„ ì—…ë°ì´íŠ¸
            updateStars(starsEarned);

            // í„°ë¯¸ë„ ì¶œë ¥
            addTerminalOutput(`âœ… ì •ë‹µ! (${60 - timer}ì´ˆ ë§Œì— ì„±ê³µ)`, 'success');
            addTerminalOutput(`ğŸ‰ ì ìˆ˜: ${levelScore} (ì½¤ë³´ x${comboBonus})`, 'success');

            // ì„±ê³µ ì• ë‹ˆë©”ì´ì…˜
            elements.successOverlay.style.display = 'block';
            setTimeout(() => {
                elements.successOverlay.style.display = 'none';
            }, 600);

            // ë‹¤ìŒ ë ˆë²¨
            setTimeout(() => {
                if (currentLevel < levels.length - 1) {
                    loadLevel(currentLevel + 1);
                } else {
                    gameComplete();
                }
            }, 2000);

            // UI ì—…ë°ì´íŠ¸
            elements.combo.textContent = combo;
            elements.score.textContent = score;
        }

        // ê²Œì„ ì™„ë£Œ
        function gameComplete() {
            addTerminalOutput('ğŸŠ ì¶•í•˜í•©ë‹ˆë‹¤! Git Ninjaê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¥·âœ¨', 'success');
            addTerminalOutput(`ìµœì¢… ì ìˆ˜: ${score}`, 'success');
            addTerminalOutput('ìƒˆë¡œê³ ì¹¨í•´ì„œ ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!', 'hint');
        }

        // ê²Œì„ ì˜¤ë²„
        function gameOver(reason) {
            addTerminalOutput(`ğŸ’€ ${reason}`, 'error');
            addTerminalOutput('ìƒˆë¡œê³ ì¹¨í•´ì„œ ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!', 'hint');
            combo = 0;
            elements.combo.textContent = '0';
        }

        // íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
        function showHint() {
            if (hintsUsed >= 3) return;

            const level = levels[currentLevel];
            const hintIndex = hintsUsed;
            const hint = level.hints[hintIndex];

            addTerminalOutput(`ğŸ’¡ íŒíŠ¸ ${hintIndex + 1}: ${hint}`, 'hint');
            hintsUsed++;
            updateHintButton();
        }

        // ì •ë‹µ ë³´ì—¬ì£¼ê¸°
        function showSolution() {
            const level = levels[currentLevel];
            addTerminalOutput(`âœ… ì •ë‹µ: git ${level.solution}`, 'success');
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        elements.commandInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const command = elements.commandInput.value;
                if (command.trim()) {
                    checkCommand(command);
                }
            }
        });

        elements.hintBtn.addEventListener('click', showHint);
        elements.solutionBtn.addEventListener('click', showSolution);

        // ê²Œì„ ì‹œì‘
        loadLevel(0);

        // í¬ì»¤ìŠ¤ ìœ ì§€
        elements.commandInput.focus();
        document.addEventListener('click', () => elements.commandInput.focus());
    </script>
</body>
</html>