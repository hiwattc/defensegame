<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ë¦„ ì í”„ ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        
            padding-top: 80px;
        }
        
        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, 
                #87CEEB 0%, 
                #98D8E8 30%, 
                #B0E2FF 60%, 
                #E0F6FF 100%);
        }
        
        #gameInfo {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 18px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 10;
        }
        
        #instructions {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: white;
            font-size: 14px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: right;
            z-index: 10;
        }
            
        .hashtag-menu {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px;
            z-index: 1000;
            text-align: center;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .hashtag-item {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            margin: 4px 6px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .hashtag-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4c93 100%);
        }
        
        .hashtag-item.current {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
        }
        
        .hashtag-category {
            display: inline-block;
            margin: 0 10px;
        }
        
        .category-title {
            color: #ccc;
            font-size: 12px;
            margin-right: 5px;
        }
            
        /* í•´ì‹œíƒœê·¸ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
        .hashtag-menu {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px;
            z-index: 1000;
            text-align: center;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .hashtag-item {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            margin: 4px 6px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .hashtag-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4c93 100%);
        }
        
        .hashtag-item.current {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
        }
        
        .hashtag-category {
            display: inline-block;
            margin: 0 10px;
        }
        
        .category-title {
            color: #ccc;
            font-size: 12px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <!-- í•´ì‹œíƒœê·¸ ë©”ë‰´ -->
    <div class="hashtag-menu">
        <div class="hashtag-category">
            <span class="category-title">ğŸ® ì•¡ì…˜</span>
            <a href="index.html" class="hashtag-item">#3DìŠˆíŒ…</a>
            <a href="def1.html" class="hashtag-item">#ì„±ë°©ì–´</a>
            <a href="bomb.html" class="hashtag-item">#í­íƒ„ê²Œì„</a>
            <a href="bomb2.html" class="hashtag-item">#í­íƒ„2</a>
            <a href="arrow1.html" class="hashtag-item">#í™”ì‚´ì˜ê¸°</a>
            <a href="tire1.html" class="hashtag-item">#íƒ€ì´ì–´êµ´ë¦¬ê¸°</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸš€ ì‹œë®¬ë ˆì´ì…˜</span>
            <a href="game1.html" class="hashtag-item">#ë¡œì¼“ì°©ë¥™</a>
            <a href="tank1.html" class="hashtag-item">#íƒ±í¬ì „íˆ¬</a>
            <a href="tank2.html" class="hashtag-item">#íƒ±í¬ì „íˆ¬2</a>
            <a href="tank3.html" class="hashtag-item">#íƒ±í¬ì „íˆ¬3</a>
            <a href="tank5.html" class="hashtag-item">#íƒ±í¬ì „íˆ¬5</a>
            <a href="spacex.html" class="hashtag-item">#ìŠ¤í˜ì´ìŠ¤X</a>
            <a href="rocket1.html" class="hashtag-item">#ë¡œì¼“1</a>
            <a href="rocket2.html" class="hashtag-item">#ë¡œì¼“2</a>
            <a href="plain.html" class="hashtag-item">#ë³µì—½ê¸°</a>
            <a href="formula1.html" class="hashtag-item">#F1ë ˆì´ì‹±</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸ§© í¼ì¦</span>
            <a href="sliding-puzzle.html" class="hashtag-item">#ìŠ¬ë¼ì´ë”©í¼ì¦</a>
            <a href="1to100.html" class="hashtag-item">#1to100</a>
            <a href="numbermove.html" class="hashtag-item">#ìˆ«ìì´ë™</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">âš¾ ìŠ¤í¬ì¸ </span>
            <a href="baseball.html" class="hashtag-item">#ì•¼êµ¬ê²Œì„</a>
            <a href="bowl.html" class="hashtag-item">#ë³¼ë§</a>
            <a href="bowl2.html" class="hashtag-item">#ë¸”ëŸ­ë¹Œë”©</a>
            <a href="bowl3.html" class="hashtag-item">#í…ŒíŠ¸ë¦¬ìŠ¤</a>
            <a href="bowl4.html" class="hashtag-item">#ì•µê·¸ë¦¬ë²„ë“œ</a>
            <a href="bowl5.html" class="hashtag-item">#ì•µê·¸ë¦¬ë²„ë“œ2</a>
            <a href="bowlike.html" class="hashtag-item">#ë³¼ë§ê²Œì„</a>
            <a href="jump1.html" class="hashtag-item current">#êµ¬ë¦„ì í”„</a>
            <a href="run1.html" class="hashtag-item">#í—ˆë“¤ë‹¬ë¦¬ê¸°</a>
            <a href="run2.html" class="hashtag-item">#ë§í—ˆë“¤</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸš— ë“œë¼ì´ë¹™</span>
            <a href="parking1.html" class="hashtag-item">#ì£¼ì°¨ê²Œì„1</a>
            <a href="parking2.html" class="hashtag-item">#ì£¼ì°¨ê²Œì„2</a>
            <a href="parking3.html" class="hashtag-item">#ë ˆì´ì‹±ê²Œì„</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸ—ºï¸ RPG</span>
            <a href="open1.html" class="hashtag-item">#ì˜¤í”ˆì›”ë“œ</a>
            <a href="open2.html" class="hashtag-item">#íƒ±í¬ë””íœìŠ¤</a>
            <a href="open3.html" class="hashtag-item">#íƒ±í¬ì „íˆ¬RPG</a>
            <a href="open3d1.html" class="hashtag-item">#ìˆ²ì†íƒí—˜</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸ“ ìƒì‚°ì„±</span>
            <a href="JBTODO_V3.html" class="hashtag-item">#TODO_V3</a>
            <a href="JBTODO_V2.html" class="hashtag-item">#TODO_V2</a>
            <a href="JBTODO_V1.html" class="hashtag-item">#TODO_V1</a>
            <a href="webfiddler.html" class="hashtag-item">#ì›¹ë¶„ì„ë„êµ¬</a>
            <a href="websiteanal.html" class="hashtag-item">#ë³´ì•ˆí—¤ë”</a>
            <a href="gitstudy1.html" class="hashtag-item">#Gití•™ìŠµ</a>
        </div>
    </div>
    
    <div class="hashtag-category">
            <span class="category-title">ğŸš€ ì‹œë®¬ë ˆì´ì…˜</span>
            <a href="game1.html" class="hashtag-item">#ë¡œì¼“</a>
            <a href="tank1.html" class="hashtag-item">#íƒ±í¬</a>
            <a href="tank3.html" class="hashtag-item">#íƒ±í¬3</a>
            <a href="spacex.html" class="hashtag-item">#ìŠ¤í˜ì´ìŠ¤X</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸ§© í¼ì¦</span>
            <a href="sliding-puzzle.html" class="hashtag-item">#ìŠ¬ë¼ì´ë”©</a>
            <a href="1to100.html" class="hashtag-item">#1to100</a>
            <a href="numbermove.html" class="hashtag-item">#ìˆ«ìì´ë™</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">âš¾ ìŠ¤í¬ì¸ </span>
            <a href="baseball.html" class="hashtag-item">#ì•¼êµ¬</a>
            <a href="bowl.html" class="hashtag-item">#ë³¼ë§</a>
            <a href="jump1.html" class="hashtag-item current">#ì í”„</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸš— ë“œë¼ì´ë¹™</span>
            <a href="parking1.html" class="hashtag-item">#ì£¼ì°¨1</a>
            <a href="parking2.html" class="hashtag-item">#ì£¼ì°¨2</a>
            <a href="parking3.html" class="hashtag-item">#ì£¼ì°¨3</a>
        </div>
        <div class="hashtag-category">
            <span class="category-title">ğŸ“ ìƒì‚°ì„±</span>
            <a href="JBTODO_V3.html" class="hashtag-item">#TODO</a>
            <a href="webfiddler.html" class="hashtag-item">#ì›¹ë„êµ¬</a>
        </div>
    </div>
    
    <div id="gameInfo">
        <div>ì ìˆ˜: <span id="score">0</span></div>
        <div>ë†’ì´: <span id="height">0</span>m</div>
        <div>ìµœê³ ì ìˆ˜: <span id="bestScore">0</span></div>
    </div>
    
    <div id="gameOverScreen" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 30px; border-radius: 15px; text-align: center; z-index: 20;">
        <h2 style="margin: 0 0 20px 0; color: #FF6B6B;">ê²Œì„ ì¢…ë£Œ!</h2>
        <div style="font-size: 18px; margin-bottom: 10px;">ì ìˆ˜: <span id="finalScore">0</span></div>
        <div style="font-size: 16px; margin-bottom: 20px;">ìµœê³ ì ìˆ˜: <span id="finalBestScore">0</span></div>
        <button id="restartBtn" style="background: #4CAF50; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 5px; cursor: pointer;">ë‹¤ì‹œ ì‹œì‘</button>
    </div>
    
    <div id="instructions">
        ë°©í–¥í‚¤ ë˜ëŠ” WASDë¡œ ì›€ì§ì´ê¸°<br>
        ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ì í”„<br>
        êµ¬ë¦„ì„ ë°Ÿì•„ì„œ ë” ë†’ì´ ì˜¬ë¼ê°€ì„¸ìš”!<br>
        âœ¨íŠ¹ìˆ˜ êµ¬ë¦„: ìŠˆí¼ ì í”„!<br>
        ğŸš€ë¡œì¼“: íƒ€ê³  í•˜ëŠ˜ë¡œ!
    </div>
    
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const heightEl = document.getElementById('height');
        const bestScoreEl = document.getElementById('bestScore');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const finalScoreEl = document.getElementById('finalScore');
        const finalBestScoreEl = document.getElementById('finalBestScore');
        const restartBtn = document.getElementById('restartBtn');

        // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ê²Œì„ ìƒíƒœ
        const game = {
            camera: { y: 0 },
            score: 0,
            maxHeight: 0,
            isGameOver: false,
            bestScore: 0
        };

        // í”Œë ˆì´ì–´
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            width: 30,
            height: 30,
            velX: 0,
            velY: 0,
            speed: 5,
            jumpPower: 15,
            onGround: false,
            onCloud: null, // í˜„ì¬ ì„œìˆëŠ” êµ¬ë¦„
            onRocket: null, // í˜„ì¬ íƒ€ê³ ìˆëŠ” ë¡œì¼“
            color: '#FF6B6B'
        };

        // êµ¬ë¦„ë“¤
        const clouds = [];
        
        // êµ¬ë¦„ ìƒì„±
        function createCloud(x, y, width = 80, height = 40, type = 'normal') {
            const cloud = {
                x: x,
                y: y,
                width: width,
                height: height,
                velX: (Math.random() - 0.5) * 2, // -1 ~ 1 ì‚¬ì´ì˜ ì†ë„
                opacity: 0.8 + Math.random() * 0.2,
                type: type
            };
            
            if (type === 'special') {
                cloud.jumpPower = 2 + Math.random() * 8; // 2ë°°~10ë°° ì í”„ë ¥
                cloud.emoji = ['â­', 'ğŸ’«', 'âœ¨', 'ğŸŒŸ', 'ğŸ’'][Math.floor(Math.random() * 5)];
            }
            
            return cloud;
        }

        // ë¡œì¼“ ìƒì„±
        const rockets = [];
        function createRocket() {
            return {
                x: Math.random() * canvas.width,
                y: canvas.height + 50,
                width: 40,
                height: 60,
                velY: -3 - Math.random() * 2,
                emoji: 'ğŸš€'
            };
        }

        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            player.x = canvas.width / 2;
            player.y = canvas.height - 100;
            player.velX = 0;
            player.velY = 0;
            player.onGround = false;
            player.onCloud = null;
            player.onRocket = null;
            
            game.camera.y = 0;
            game.score = 0;
            game.maxHeight = 0;
            game.isGameOver = false;
            
            clouds.length = 0;
            rockets.length = 0;
            initClouds();
            
            gameOverScreen.style.display = 'none';
            updateUI();
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            scoreEl.textContent = game.score;
            heightEl.textContent = Math.max(0, Math.floor((canvas.height - player.y) / 10));
            bestScoreEl.textContent = game.bestScore;
        }
        
        // ê²Œì„ ì¢…ë£Œ ì²˜ë¦¬
        function gameOver() {
            game.isGameOver = true;
            
            // ìµœê³ ì ìˆ˜ ì—…ë°ì´íŠ¸
            if (game.score > game.bestScore) {
                game.bestScore = game.score;
            }
            
            // ê²Œì„ ì˜¤ë²„ í™”ë©´ í‘œì‹œ
            finalScoreEl.textContent = game.score;
            finalBestScoreEl.textContent = game.bestScore;
            gameOverScreen.style.display = 'block';
        }
        // ì´ˆê¸° êµ¬ë¦„ë“¤ ìƒì„±
        function initClouds() {
            // ë°”ë‹¥ êµ¬ë¦„
            for (let i = 0; i < 8; i++) {
                clouds.push(createCloud(
                    Math.random() * canvas.width,
                    canvas.height - 50,
                    100 + Math.random() * 50,
                    30 + Math.random() * 20
                ));
            }
            
            // ìƒê³µì˜ êµ¬ë¦„ë“¤ - ë” ì´˜ì´˜í•˜ê²Œ
            for (let i = 0; i < 50; i++) {
                // ê° ì¸µë§ˆë‹¤ ì—¬ëŸ¬ ê°œì˜ êµ¬ë¦„ ìƒì„±
                const layerHeight = canvas.height - 150 - (i * 80);
                for (let j = 0; j < 3; j++) {
                    const cloudType = Math.random() < 0.15 ? 'special' : 'normal'; // 15% í™•ë¥ ë¡œ íŠ¹ìˆ˜ êµ¬ë¦„
                    clouds.push(createCloud(
                        (canvas.width / 3) * j + Math.random() * (canvas.width / 3),
                        layerHeight - Math.random() * 40,
                        60 + Math.random() * 60,
                        25 + Math.random() * 20,
                        cloudType
                    ));
                }
            }
        }

        // í‚¤ ì…ë ¥ ì²˜ë¦¬
        const keys = {};
        
        window.addEventListener('keydown', (e) => {
            if (game.isGameOver) return;
            
            keys[e.key.toLowerCase()] = true;
            
            if (e.key === ' ') {
                e.preventDefault();
                if (player.onGround) {
                    player.velY = -player.jumpPower;
                    player.onGround = false;
                }
            }
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });

        // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸
        restartBtn.addEventListener('click', initGame);

        // êµ¬ë¦„ ê·¸ë¦¬ê¸°
        function drawCloud(cloud) {
            const screenY = cloud.y + game.camera.y;
            if (screenY > canvas.height + 50 || screenY < -100) return;

            ctx.save();
            ctx.globalAlpha = cloud.opacity;
            ctx.fillStyle = cloud.type === 'special' ? '#FFD700' : 'white';
            
            // êµ¬ë¦„ ëª¨ì–‘ ê·¸ë¦¬ê¸° (ì—¬ëŸ¬ ì›ìœ¼ë¡œ êµ¬ì„±)
            const centerX = cloud.x + cloud.width / 2;
            const centerY = screenY + cloud.height / 2;
            
            ctx.beginPath();
            ctx.arc(centerX - cloud.width * 0.3, centerY, cloud.height * 0.4, 0, Math.PI * 2);
            ctx.arc(centerX, centerY - cloud.height * 0.2, cloud.height * 0.5, 0, Math.PI * 2);
            ctx.arc(centerX + cloud.width * 0.3, centerY, cloud.height * 0.4, 0, Math.PI * 2);
            ctx.arc(centerX - cloud.width * 0.1, centerY + cloud.height * 0.1, cloud.height * 0.3, 0, Math.PI * 2);
            ctx.arc(centerX + cloud.width * 0.1, centerY + cloud.height * 0.1, cloud.height * 0.3, 0, Math.PI * 2);
            ctx.fill();
            
            // íŠ¹ìˆ˜ êµ¬ë¦„ ì´ëª¨í‹°ì½˜
            if (cloud.type === 'special') {
                ctx.globalAlpha = 1;
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(cloud.emoji, centerX, centerY - 5);
            }
            
            ctx.restore();
        }

        // ë¡œì¼“ ê·¸ë¦¬ê¸°
        function drawRocket(rocket) {
            const screenY = rocket.y + game.camera.y;
            if (screenY > canvas.height + 100 || screenY < -200) return;

            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(rocket.emoji, rocket.x + rocket.width/2, screenY + rocket.height/2);
        }

        // í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸°
        function drawPlayer() {
            const screenY = player.y + game.camera.y;
            
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x - player.width/2, screenY - player.height/2, player.width, player.height);
            
            // ê°„ë‹¨í•œ ì–¼êµ´ ì¶”ê°€
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x - player.width/2 + 5, screenY - player.height/2 + 5, 6, 6);
            ctx.fillRect(player.x - player.width/2 + 19, screenY - player.height/2 + 5, 6, 6);
            
            ctx.fillStyle = 'black';
            ctx.fillRect(player.x - player.width/2 + 7, screenY - player.height/2 + 7, 2, 2);
            ctx.fillRect(player.x - player.width/2 + 21, screenY - player.height/2 + 7, 2, 2);
        }

        // ì¶©ëŒ ê²€ì‚¬
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        // ê²Œì„ ì—…ë°ì´íŠ¸
        function update() {
            if (game.isGameOver) return;
            
            // ë°”ë‹¥ ì¶”ë½ ê²€ì‚¬
            if (player.y > canvas.height + 100) {
                gameOver();
                return;
            }
            
            // ë¡œì¼“ ìƒì„± (ê°„ê°„íˆ)
            if (Math.random() < 0.005) {
                rockets.push(createRocket());
            }
            
            // í”Œë ˆì´ì–´ ì…ë ¥ ì²˜ë¦¬
            if (keys['a'] || keys['arrowleft']) {
                player.velX = -player.speed;
            } else if (keys['d'] || keys['arrowright']) {
                player.velX = player.speed;
            } else {
                player.velX *= 0.8; // ë§ˆì°°
            }

            if (keys['w'] || keys['arrowup']) {
                if (player.onGround) {
                    let jumpPower = player.jumpPower;
                    if (player.onCloud && player.onCloud.type === 'special') {
                        jumpPower *= player.onCloud.jumpPower;
                    }
                    player.velY = -jumpPower;
                    player.onGround = false;
                    player.onCloud = null;
                    player.onRocket = null;
                }
            }

            // ì¤‘ë ¥ ì ìš© (ë¡œì¼“ì„ íƒ€ê³  ìˆì§€ ì•Šì„ ë•Œë§Œ)
            if (!player.onRocket) {
                player.velY += 0.8;
            }
            
            // í”Œë ˆì´ì–´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            player.x += player.velX;
            
            // êµ¬ë¦„ ìœ„ì— ìˆì„ ë•Œ êµ¬ë¦„ê³¼ ê°™ì´ ì›€ì§ì´ê¸°
            if (player.onCloud && player.onGround) {
                player.x += player.onCloud.velX;
            }
            
            // ë¡œì¼“ì„ íƒ€ê³  ìˆì„ ë•Œ
            if (player.onRocket) {
                player.x = player.onRocket.x + player.onRocket.width/2;
                player.y += player.onRocket.velY;
                player.velY = player.onRocket.velY;
            } else {
                player.y += player.velY;
            }
            
            // í™”ë©´ ê²½ê³„ ì²˜ë¦¬
            if (player.x < 0) player.x = canvas.width;
            if (player.x > canvas.width) player.x = 0;
            
            player.onGround = false;
            player.onCloud = null;
            
            // ë¡œì¼“ê³¼ ì¶©ëŒ ê²€ì‚¬
            for (let i = rockets.length - 1; i >= 0; i--) {
                const rocket = rockets[i];
                if (checkCollision({
                    x: player.x - player.width/2,
                    y: player.y - player.height/2,
                    width: player.width,
                    height: player.height
                }, rocket)) {
                    player.onRocket = rocket;
                    player.onGround = true;
                    break;
                }
                
                // ë¡œì¼“ì´ ë„ˆë¬´ ë†’ì´ ì˜¬ë¼ê°€ë©´ ì œê±°
                if (rocket.y < -game.camera.y - 300) {
                    rockets.splice(i, 1);
                }
            }
            
            // êµ¬ë¦„ê³¼ ì¶©ëŒ ê²€ì‚¬
            if (!player.onRocket) {
                for (let cloud of clouds) {
                    if (checkCollision({
                        x: player.x - player.width/2,
                        y: player.y - player.height/2,
                        width: player.width,
                        height: player.height
                    }, cloud)) {
                        // ìœ„ì—ì„œ ë–¨ì–´ì§€ëŠ” ê²½ìš°ë§Œ ì°©ì§€
                        if (player.velY > 0 && player.y - player.height/2 < cloud.y + cloud.height/2) {
                            player.y = cloud.y - player.height/2;
                            player.velY = 0;
                            player.onGround = true;
                            player.onCloud = cloud;
                            
                            // ì ìˆ˜ ì¦ê°€
                            const height = Math.max(0, canvas.height - player.y);
                            if (height > game.maxHeight) {
                                let scoreBonus = Math.floor((height - game.maxHeight) / 10);
                                if (cloud.type === 'special') {
                                    scoreBonus *= 2; // íŠ¹ìˆ˜ êµ¬ë¦„ì—ì„œ 2ë°° ì ìˆ˜
                                }
                                game.score += scoreBonus;
                                game.maxHeight = height;
                            }
                            break;
                        }
                    }
                }
            }
            
            // êµ¬ë¦„ ì´ë™
            for (let cloud of clouds) {
                cloud.x += cloud.velX;
                
                // í™”ë©´ ê²½ê³„ì—ì„œ ë°˜ì‚¬
                if (cloud.x < -cloud.width || cloud.x > canvas.width + cloud.width) {
                    cloud.velX *= -1;
                }
            }
            
            // ë¡œì¼“ ì´ë™
            for (let rocket of rockets) {
                rocket.y += rocket.velY;
            }
            
            // ì¹´ë©”ë¼ ì—…ë°ì´íŠ¸ (í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ê°€ê¸°)
            const targetCameraY = canvas.height * 0.7 - player.y;
            game.camera.y += (targetCameraY - game.camera.y) * 0.1;
            
            // ìƒˆë¡œìš´ êµ¬ë¦„ ìƒì„± - ë” ìì£¼, ë” ì´˜ì´˜í•˜ê²Œ
            if (Math.random() < 0.05) {
                const highestCloud = Math.min(...clouds.map(c => c.y));
                if (highestCloud > -game.camera.y - 200) {
                    // ê° ì¸µì— ì—¬ëŸ¬ ê°œì˜ êµ¬ë¦„ ìƒì„±
                    const layerY = highestCloud - 80 - Math.random() * 40;
                    for (let i = 0; i < 2 + Math.floor(Math.random() * 2); i++) {
                        const cloudType = Math.random() < 0.15 ? 'special' : 'normal';
                        clouds.push(createCloud(
                            Math.random() * canvas.width,
                            layerY - Math.random() * 30,
                            60 + Math.random() * 60,
                            25 + Math.random() * 20,
                            cloudType
                        ));
                    }
                }
            }
            
            updateUI();
        }

        // ê²Œì„ ë Œë”ë§
        function render() {
            // ë°°ê²½ ê·¸ë¦¬ê¸° (ê·¸ë¼ë°ì´ì…˜ì€ CSSì—ì„œ ì²˜ë¦¬)
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ë¡œì¼“ë“¤ ê·¸ë¦¬ê¸°
            for (let rocket of rockets) {
                drawRocket(rocket);
            }
            
            // êµ¬ë¦„ë“¤ ê·¸ë¦¬ê¸°
            for (let cloud of clouds) {
                drawCloud(cloud);
            }
            
            // í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸°
            drawPlayer();
        }

        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // ê²Œì„ ì‹œì‘
        initGame();
        
        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }
        
        gameLoop();
    </script>
</body>
</html>