<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›¹ì‚¬ì´íŠ¸ ë³´ì•ˆ í—¤ë” ë¶„ì„ê¸°1111111ë‚˜ì¢€ì‚­ì œí•´ì¤˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .url-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        input[type="url"] {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="url"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-size: 18px;
        }

        .results {
            display: none;
        }

        .results.show {
            display: block;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #667eea;
        }

        .section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            display: inline-block;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .info-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }

        .info-value {
            font-family: 'Courier New', monospace;
            background: #e9ecef;
            padding: 8px 12px;
            border-radius: 6px;
            word-break: break-all;
        }

        .security-score {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .score-excellent {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }

        .score-good {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
        }

        .score-fair {
            background: linear-gradient(45deg, #FF9800, #F57C00);
            color: white;
        }

        .score-poor {
            background: linear-gradient(45deg, #f44336, #d32f2f);
            color: white;
        }

        .cookie-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .cookie-table th,
        .cookie-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .cookie-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
        }

        .cookie-table tr:hover {
            background: #f5f5f5;
        }

        .security-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-secure {
            background: #d4edda;
            color: #155724;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .url-input {
                flex-direction: column;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ì›¹ì‚¬ì´íŠ¸ ë³´ì•ˆ í—¤ë” ë¶„ì„ê¸°</h1>
        
        <div class="input-section">
            <div class="url-input">
                <input type="url" id="urlInput" placeholder="ë¶„ì„í•  ì›¹ì‚¬ì´íŠ¸ URLì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: https://example.com)" />
                <button onclick="analyzeWebsite()" id="analyzeBtn">ë¶„ì„ ì‹œì‘</button>
            </div>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div>ğŸ”„ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</div>
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="results" class="results">
            <div id="securityScore" class="security-score"></div>
            
            <div class="section">
                <h3><span class="section-icon"></span>ì„œë²„ ì •ë³´</h3>
                <div class="info-grid" id="serverInfo"></div>
            </div>

            <div class="section">
                <h3><span class="section-icon"></span>ë³´ì•ˆ í—¤ë”</h3>
                <div class="info-grid" id="securityHeaders"></div>
            </div>

            <div class="section">
                <h3><span class="section-icon"></span>ì¿ í‚¤ ë³´ì•ˆ ë¶„ì„</h3>
                <div id="cookieAnalysis"></div>
            </div>

            <div class="section">
                <h3><span class="section-icon"></span>ì‘ë‹µ í—¤ë” ì „ì²´</h3>
                <div id="allHeaders"></div>
            </div>
        </div>
    </div>

    <script>
        let currentUrl = '';

        async function analyzeWebsite() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value.trim();
            
            if (!url) {
                showError('URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!isValidUrl(url)) {
                showError('ì˜¬ë°”ë¥¸ URL í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: https://example.com)');
                return;
            }

            currentUrl = url;
            showLoading(true);
            hideError();
            hideResults();

            try {
                // CORS í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ í—¤ë” ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const proxyUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent(url);
                const response = await fetch(proxyUrl);
                
                if (!response.ok) {
                    throw new Error('ì›¹ì‚¬ì´íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }

                const data = await response.json();
                
                // ì‹¤ì œ ì‚¬ì´íŠ¸ë¡œ ì§ì ‘ ìš”ì²­í•˜ì—¬ í—¤ë” ì •ë³´ í™•ì¸ ì‹œë„
                let actualResponse;
                try {
                    actualResponse = await fetch(url, { mode: 'cors', method: 'HEAD' });
                } catch (e) {
                    // CORS ì—ëŸ¬ì¸ ê²½ìš° GET ìš”ì²­ìœ¼ë¡œ ì¬ì‹œë„
                    try {
                        actualResponse = await fetch(url, { mode: 'no-cors' });
                    } catch (e2) {
                        // í”„ë¡ì‹œ ì‘ë‹µë§Œ ì‚¬ìš©
                        actualResponse = null;
                    }
                }

                analyzeResponse(actualResponse, data);
                showResults();
                
            } catch (error) {
                showError('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        function analyzeResponse(response, proxyData) {
            const headers = {};
            
            // ì‹¤ì œ ì‘ë‹µì—ì„œ í—¤ë” ì¶”ì¶œ
            if (response && response.headers) {
                for (let [key, value] of response.headers.entries()) {
                    headers[key.toLowerCase()] = value;
                }
            }

            // í”„ë¡ì‹œ ë°ì´í„°ì—ì„œ ì¶”ê°€ ì •ë³´ ì¶”ì¶œ
            if (proxyData && proxyData.status) {
                // ìƒíƒœ ì½”ë“œ ì •ë³´ ì¶”ê°€
                headers['status'] = proxyData.status.toString();
            }

            displayServerInfo(headers);
            displaySecurityHeaders(headers);
            displayCookieAnalysis(headers);
            displayAllHeaders(headers);
            calculateSecurityScore(headers);
        }

        function displayServerInfo(headers) {
            const serverInfo = document.getElementById('serverInfo');
            const info = [];

            if (headers['server']) {
                info.push({ label: 'ì›¹ì„œë²„', value: headers['server'] });
            }

            if (headers['x-powered-by']) {
                info.push({ label: 'í”Œë«í¼/í”„ë ˆì„ì›Œí¬', value: headers['x-powered-by'] });
            }

            if (headers['content-type']) {
                info.push({ label: 'Content-Type', value: headers['content-type'] });
            }

            if (headers['status']) {
                info.push({ label: 'HTTP ìƒíƒœ', value: headers['status'] });
            }

            if (headers['date']) {
                info.push({ label: 'ì‘ë‹µ ì‹œê°„', value: headers['date'] });
            }

            if (headers['last-modified']) {
                info.push({ label: 'ìµœì¢… ìˆ˜ì •ì¼', value: headers['last-modified'] });
            }

            if (info.length === 0) {
                info.push({ label: 'ì„œë²„ ì •ë³´', value: 'ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (CORS ì œí•œ)' });
            }

            serverInfo.innerHTML = info.map(item => `
                <div class="info-item">
                    <div class="info-label">${item.label}</div>
                    <div class="info-value">${item.value}</div>
                </div>
            `).join('');
        }

        function displaySecurityHeaders(headers) {
            const securityHeaders = document.getElementById('securityHeaders');
            const securityChecks = [
                {
                    header: 'strict-transport-security',
                    name: 'HSTS (HTTP Strict Transport Security)',
                    description: 'HTTPS ê°•ì œ ì‚¬ìš©'
                },
                {
                    header: 'content-security-policy',
                    name: 'CSP (Content Security Policy)',
                    description: 'XSS ê³µê²© ë°©ì§€'
                },
                {
                    header: 'x-frame-options',
                    name: 'X-Frame-Options',
                    description: 'Clickjacking ë°©ì§€'
                },
                {
                    header: 'x-content-type-options',
                    name: 'X-Content-Type-Options',
                    description: 'MIME íƒ€ì… ìŠ¤ëˆ„í•‘ ë°©ì§€'
                },
                {
                    header: 'x-xss-protection',
                    name: 'X-XSS-Protection',
                    description: 'XSS í•„í„° í™œì„±í™”'
                },
                {
                    header: 'referrer-policy',
                    name: 'Referrer Policy',
                    description: 'Referrer ì •ë³´ ì œì–´'
                }
            ];

            securityHeaders.innerHTML = securityChecks.map(check => {
                const value = headers[check.header];
                const status = value ? 'secure' : 'danger';
                const displayValue = value || 'ì„¤ì •ë˜ì§€ ì•ŠìŒ';
                
                return `
                    <div class="info-item">
                        <div class="info-label">
                            ${check.name}
                            <span class="security-status status-${status}">
                                ${value ? 'âœ“ ì„¤ì •ë¨' : 'âœ— ë¯¸ì„¤ì •'}
                            </span>
                        </div>
                        <div class="info-value">${displayValue}</div>
                        <small style="color: #666; margin-top: 5px; display: block;">${check.description}</small>
                    </div>
                `;
            }).join('');
        }

        function displayCookieAnalysis(headers) {
            const cookieAnalysis = document.getElementById('cookieAnalysis');
            const setCookieHeaders = [];
            
            // Set-Cookie í—¤ë” ì°¾ê¸°
            Object.keys(headers).forEach(key => {
                if (key.toLowerCase().includes('set-cookie')) {
                    setCookieHeaders.push(headers[key]);
                }
            });

            if (setCookieHeaders.length === 0) {
                cookieAnalysis.innerHTML = '<p>ì„¤ì •ëœ ì¿ í‚¤ê°€ ì—†ê±°ë‚˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            const cookies = setCookieHeaders.map(cookie => parseCookie(cookie));
            
            cookieAnalysis.innerHTML = `
                <table class="cookie-table">
                    <thead>
                        <tr>
                            <th>ì¿ í‚¤ëª…</th>
                            <th>HttpOnly</th>
                            <th>Secure</th>
                            <th>SameSite</th>
                            <th>ë³´ì•ˆ ì ìˆ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${cookies.map(cookie => `
                            <tr>
                                <td>${cookie.name}</td>
                                <td>
                                    <span class="security-status ${cookie.httpOnly ? 'status-secure' : 'status-danger'}">
                                        ${cookie.httpOnly ? 'âœ“' : 'âœ—'}
                                    </span>
                                </td>
                                <td>
                                    <span class="security-status ${cookie.secure ? 'status-secure' : 'status-warning'}">
                                        ${cookie.secure ? 'âœ“' : 'âœ—'}
                                    </span>
                                </td>
                                <td>
                                    <span class="security-status ${cookie.sameSite ? 'status-secure' : 'status-warning'}">
                                        ${cookie.sameSite || 'ë¯¸ì„¤ì •'}
                                    </span>
                                </td>
                                <td>
                                    <span class="security-status status-${cookie.securityLevel}">
                                        ${cookie.securityScore}/3
                                    </span>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function parseCookie(cookieString) {
            const parts = cookieString.split(';').map(part => part.trim());
            const [nameValue] = parts[0].split('=');
            
            const cookie = {
                name: nameValue || 'Unknown',
                httpOnly: parts.some(part => part.toLowerCase() === 'httponly'),
                secure: parts.some(part => part.toLowerCase() === 'secure'),
                sameSite: null
            };

            const sameSitePart = parts.find(part => part.toLowerCase().startsWith('samesite='));
            if (sameSitePart) {
                cookie.sameSite = sameSitePart.split('=')[1];
            }

            // ë³´ì•ˆ ì ìˆ˜ ê³„ì‚°
            let score = 0;
            if (cookie.httpOnly) score++;
            if (cookie.secure) score++;
            if (cookie.sameSite) score++;

            cookie.securityScore = score;
            cookie.securityLevel = score >= 2 ? 'secure' : score === 1 ? 'warning' : 'danger';

            return cookie;
        }

        function displayAllHeaders(headers) {
            const allHeaders = document.getElementById('allHeaders');
            const headerEntries = Object.entries(headers);

            if (headerEntries.length === 0) {
                allHeaders.innerHTML = '<p>í—¤ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            allHeaders.innerHTML = `
                <div class="info-grid">
                    ${headerEntries.map(([key, value]) => `
                        <div class="info-item">
                            <div class="info-label">${key}</div>
                            <div class="info-value">${value}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function calculateSecurityScore(headers) {
            const securityScore = document.getElementById('securityScore');
            let score = 0;
            let maxScore = 6;

            // ë³´ì•ˆ í—¤ë” ì²´í¬
            if (headers['strict-transport-security']) score++;
            if (headers['content-security-policy']) score++;
            if (headers['x-frame-options']) score++;
            if (headers['x-content-type-options']) score++;
            if (headers['x-xss-protection']) score++;
            if (headers['referrer-policy']) score++;

            const percentage = Math.round((score / maxScore) * 100);
            let level = 'poor';
            let message = 'ë³´ì•ˆ ì„¤ì •ì´ ë¶€ì¡±í•©ë‹ˆë‹¤';

            if (percentage >= 80) {
                level = 'excellent';
                message = 'ìš°ìˆ˜í•œ ë³´ì•ˆ ì„¤ì •ì…ë‹ˆë‹¤';
            } else if (percentage >= 60) {
                level = 'good';
                message = 'ì–‘í˜¸í•œ ë³´ì•ˆ ì„¤ì •ì…ë‹ˆë‹¤';
            } else if (percentage >= 40) {
                level = 'fair';
                message = 'ë³´í†µì˜ ë³´ì•ˆ ì„¤ì •ì…ë‹ˆë‹¤';
            }

            securityScore.className = `security-score score-${level}`;
            securityScore.innerHTML = `
                <div>ğŸ›¡ï¸ ë³´ì•ˆ ì ìˆ˜: ${score}/${maxScore} (${percentage}%)</div>
                <div style="margin-top: 10px; font-size: 0.9em;">${message}</div>
            `;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function hideError() {
            document.getElementById('error').style.display = 'none';
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            document.getElementById('analyzeBtn').disabled = show;
        }

        function showResults() {
            document.getElementById('results').classList.add('show');
        }

        function hideResults() {
            document.getElementById('results').classList.remove('show');
        }

        // Enter í‚¤ë¡œ ë¶„ì„ ì‹œì‘
        document.getElementById('urlInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeWebsite();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜ˆì‹œ URL ì„¤ì •
        window.addEventListener('load', function() {
            document.getElementById('urlInput').value = 'https://github.com';
        });
    </script>
</body>
</html>